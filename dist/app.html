<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>将棋</title>
<style>

html, body {
width: 100%;
}

#game {
-webkit-user-select: none;
-moz-user-select: none;
user-select: none;
font-family: "ヒラギノ明朝 ProN W6", "HiraMinProN-W6", "HG明朝E", "ＭＳ Ｐ明朝", "MS PMincho", "MS 明朝", serif;

position: absolute;
left: 50%;
width: 572px;
margin-left: -286px;
}

.svg-button {
cursor: pointer;
}

.piece {
cursor: pointer;
font-weight: bold;
}

[v-cloak] { display: none }

</style>
</head>
<body id="app">
<svg id="game" v-cloak width="572" height="372">
  <defs>
		<path id="pieceShape" stroke-width="2"
					stroke-linejoin="round"
					d="M-16 18 L-12 -10 0 -18 12 -10 16 18 Z" />
  </defs>

	<rect fill="#B08854" x="100" y="0" width="372" height="372" />
	<rect fill="#E8B36D" stroke="#B08854" stroke-width="2"
				x="1" y="1" width="80" height="282" />
	<rect fill="#E8B36D" stroke="#B08854" stroke-width="2"
				x="491" y="89" width="80" height="282" />

	<g>
		<template v-repeat="y in [0,1,2,3,4,5,6,7,8]">
			<template v-repeat="x in [0,1,2,3,4,5,6,7,8]">
				<rect	width="40" height="40"
							v-attr="x: 100 + 2 + x * 41,
											y: 2 + y * 41,
											fill: 11 + x + y * 10 === lastMoveIndex ?
											'#FFF97B' : '#E8B36D'"
							v-on="click: selectSquare($event, x, y)" />
			</template>
		</template>
	</g>

	<circle fill="#B08854" r="3"
					v-attr="cx: 100 + 1.5 + 3 * 41, cy: 1.5 + 3 * 41" />
	<circle fill="#B08854" r="3"
					v-attr="cx: 100 + 1.5 + 6 * 41, cy: 1.5 + 3 * 41" />
	<circle fill="#B08854" r="3"
					v-attr="cx: 100 + 1.5 + 3 * 41, cy: 1.5 + 6 * 41" />
	<circle fill="#B08854" r="3"
					v-attr="cx: 100 + 1.5 + 6 * 41, cy: 1.5 + 6 * 41" />

	<g v-repeat="pieces" track-by="_uid">
		<piece $data="{{$data}}" on-click="{{selectPiece}}"></piece>
	</g>

	<g class="svg-button"
		 transform="translate(0, 286)"
		 v-on="click: init">
		<rect fill="#A7D8A5"
					x="0" y="0" width="98" height="28" />
		<text fill="#046142" x="6" y="20" font-size="15">指し直す</text>
	</g>

	<g class="svg-button"
		 transform="translate(0, 315)"
		 v-on="click: matta">
		<rect fill="#A7D8A5"
					x="0" y="0" width="98" height="28" />
		<text fill="#046142" x="6" y="20" font-size="15">待った</text>
	</g>

	<g class="svg-button"
		 style="display: none;"
		 transform="translate(0, 344)"
		 v-on="click: moveByAI()">
		<rect fill="#A7D8A5"
					x="0" y="0" width="98" height="28" />
		<text fill="#046142" x="6" y="20" font-size="15">AIが指す</text>
	</g>

	<g id="promotionSelector"
		 v-show="promotionSelect.show"
		 v-attr="transform: 'translate(' + promotionSelect.x + ', ' + promotionSelect.y + ')'">
		<rect fill="rgba(247,247,247,0.6)" stroke="#F7F7F7" stroke-width="2"
					x="-57" y="0" width="114" height="62" />
		<piece $data="{{unpromotedPiece}}"
					 on-click="{{selectUnpromote}}"></piece>
		<piece $data="{{promotedPiece}}"
					 on-click="{{selectPromote}}"></piece>
	</g>

	<g transform="translate(286, 80)"
		 v-show="gameMode === null">
		<rect fill="rgba(247,247,247,0.6)" stroke="#F7F7F7" stroke-width="2"
					x="-120" y="0" width="240" height="200" />

		<text fill="#555"
					x="-75" y="50" font-size="24">対局開始</text>
		<g class="svg-button"
			 transform="translate(-75, 80)"
			 v-on="click: gameStart('sente')">
			<rect fill="#F56F49"
						x="0" y="0" width="150" height="38" />
			<text fill="#000" x="6" y="28" font-size="24">先手で対局</text>
		</g>
		<g class="svg-button"
			 transform="translate(-75, 130)"
			 v-on="click: gameStart('gote')">
			<rect fill="#F56F49"
						x="0" y="0" width="150" height="38" />
			<text fill="#000" x="6" y="28" font-size="24">後手で対局</text>
		</g>
	</g>

	<g transform="translate(286, 80)"
		 v-show="gameResult !== null">
		<rect fill="rgba(247,247,247,0.6)" stroke="#F7F7F7" stroke-width="2"
					x="-120" y="0" width="240" height="200" />

		<text fill="#555"
					x="-75" y="50" font-size="24">{{gameResult}}</text>
	</g>
</svg>
<br>

<script src="vue.min.js"></script>
<script src="app.js"></script>
</body>
</html>
